\hypertarget{os_8h_source}{}\doxysection{os.\+h}
\mbox{\hyperlink{os_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#ifndef OS\_H}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#define OS\_H}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#define F\_CPU 16000000UL      }\textcolor{comment}{// Define Crystal Frequency of eYFi-\/Mega Board}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include "{}Arduino.h"{}}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <stdio.h>}            \textcolor{comment}{// For NULL}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <avr/io.h>}           \textcolor{comment}{// Standard AVR IO Library}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include <util/delay.h>}       \textcolor{comment}{// Standard AVR Delay Library}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include <avr/interrupt.h>}    \textcolor{comment}{// Standard AVR Interrupt Library}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{\#define NUMBER\_OF\_TASKS     10}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{preprocessor}{\#define READY     0}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#define RUNNING   1}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#define SLEEPING  2}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#define DEAD      3}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{preprocessor}{\#define PENDING   0}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#define DONE      1}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31 }
\DoxyCodeLine{37 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structTCBstruct}{TCBstruct}} \{}
\DoxyCodeLine{38     void (*ptr\_func)(\textcolor{keywordtype}{void} *p);    \textcolor{comment}{// the function pointer}}
\DoxyCodeLine{39     uint8\_t state;}
\DoxyCodeLine{40     int32\_t sleep\_remaining;}
\DoxyCodeLine{41     uint8\_t flag\_start\_sleep;}
\DoxyCodeLine{42     }
\DoxyCodeLine{43     uint8\_t unique\_id;}
\DoxyCodeLine{44     String  str\_name;}
\DoxyCodeLine{45     uint32\_t count\_restart;}
\DoxyCodeLine{46     }
\DoxyCodeLine{47     }
\DoxyCodeLine{48 \};}
\DoxyCodeLine{49 }
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{keyword}{extern} \mbox{\hyperlink{structTCBstruct}{TCBstruct}} os\_task[10];           \textcolor{comment}{// TCBstruct array to hold information about max 10 ALIVE tasks.}}
\DoxyCodeLine{52 \textcolor{keyword}{extern} \mbox{\hyperlink{structTCBstruct}{TCBstruct}} os\_dead\_task[10];      \textcolor{comment}{// TCBstruct array to hold information about max 10 DEAD tasks.}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 \textcolor{keyword}{extern} \textcolor{keyword}{volatile} uint8\_t  os\_sFlag;      \textcolor{comment}{// Stores scheduler's Flag (DONE, PENDING)}}
\DoxyCodeLine{55 \textcolor{keyword}{extern} \textcolor{keyword}{volatile} uint32\_t os\_ticks;      \textcolor{comment}{// Holds number of ms elasped since the start of Timer-\/2}}
\DoxyCodeLine{56 \textcolor{keyword}{extern} \textcolor{keyword}{volatile} uint8\_t  os\_task\_index; \textcolor{comment}{// Holds the index of current task running by the scheduler}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58 }
\DoxyCodeLine{66 \mbox{\hyperlink{os_8h_a7cfcbe42bd266750aeb6e5d71e5ea479}{ISR}}(TIMER2\_OVF\_vect);}
\DoxyCodeLine{67 }
\DoxyCodeLine{68 }
\DoxyCodeLine{73 \textcolor{keywordtype}{void} \mbox{\hyperlink{os_8h_a793243131aeeb9ec291468b450153afc}{init\_timer2}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 }
\DoxyCodeLine{80 \textcolor{keywordtype}{void} \mbox{\hyperlink{os_8h_a6cc2e63d83267ff5059bf0a76b302a09}{os\_init}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{81 }
\DoxyCodeLine{82 }
\DoxyCodeLine{88 \textcolor{keywordtype}{void} \mbox{\hyperlink{os_8h_a64ca823d60335b83f74cc28378018058}{os\_start\_task}}(\textcolor{keywordtype}{void} (*ptr\_fn)());}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 }
\DoxyCodeLine{97 \textcolor{keywordtype}{void} \mbox{\hyperlink{os_8h_ab93fff6139a40309204c3f4d9a05385f}{os\_delay}}(int32\_t delay\_ms);}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 }
\DoxyCodeLine{104 \textcolor{keywordtype}{void} \mbox{\hyperlink{os_8h_a6fa1bd897970c397a75e419b075aba71}{os\_task\_self\_quit}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{105 }
\DoxyCodeLine{106 }
\DoxyCodeLine{112 \textcolor{keywordtype}{void} \mbox{\hyperlink{os_8h_a05c255dfcd1851a78b14067476b6433b}{os\_task\_start}}(\mbox{\hyperlink{structTCBstruct}{TCBstruct}}* ptr\_tcb);}
\DoxyCodeLine{113 }
\DoxyCodeLine{114 }
\DoxyCodeLine{120 \textcolor{keywordtype}{void} \mbox{\hyperlink{os_8h_aa1c4a70d3987d6ab49f6150bd7d210c8}{os\_from\_task\_start}}(\textcolor{keywordtype}{int} task\_num);}
\DoxyCodeLine{121 }
\DoxyCodeLine{122 }
\DoxyCodeLine{128 \textcolor{keywordtype}{void} \mbox{\hyperlink{os_8h_a4580170be11c3368183e639047815698}{os\_from\_task\_stop}}(\textcolor{keywordtype}{int} task\_num);}
\DoxyCodeLine{129 }
\DoxyCodeLine{130 }
\DoxyCodeLine{139 \textcolor{keywordtype}{void} \mbox{\hyperlink{os_8h_ad89e53bc232b85604368e45d2469784f}{os\_scheduler\_sync}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{140 }
\DoxyCodeLine{141 }
\DoxyCodeLine{148 \textcolor{keywordtype}{void} \mbox{\hyperlink{os_8h_a3fc86ed91990cc04813ff7823fb4ffcd}{os\_scheduler}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{149 }
\DoxyCodeLine{150 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
