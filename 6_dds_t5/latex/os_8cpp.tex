\hypertarget{os_8cpp}{}\doxysection{os.\+cpp File Reference}
\label{os_8cpp}\index{os.cpp@{os.cpp}}


DDS Scheduler driver code.  


{\ttfamily \#include \char`\"{}os.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}task1.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}task2.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}task3.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}task5.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{os_8cpp_a7cfcbe42bd266750aeb6e5d71e5ea479}{ISR}} (TIMER2\+\_\+\+OVF\+\_\+vect)
\begin{DoxyCompactList}\small\item\em Interrupt Service Routine for Timer-\/2. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{os_8cpp_aee8e07be306352898c552d27b9494317}\label{os_8cpp_aee8e07be306352898c552d27b9494317}} 
void {\bfseries init\+\_\+timer2} ()
\begin{DoxyCompactList}\small\item\em Configure Timer-\/2 to fire ISR every 2 ms. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{os_8cpp_a6cc2e63d83267ff5059bf0a76b302a09}\label{os_8cpp_a6cc2e63d83267ff5059bf0a76b302a09}} 
void {\bfseries os\+\_\+init} (void)
\begin{DoxyCompactList}\small\item\em Initializes Timer-\/2 and add Tasks for the scheduler to manage. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{os_8cpp_aed347e469bcc7a123a2cf79e6605c330}{os\+\_\+add\+\_\+task}} (void($\ast$ptr\+\_\+func)(), uint8\+\_\+t unique\+\_\+id, String str\+\_\+name)
\begin{DoxyCompactList}\small\item\em Add a task to os\+\_\+task array. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{os_8cpp_a4074f4edb4c4e174a6bfa82b66d2942d}{os\+\_\+remove\+\_\+task}} (uint8\+\_\+t target\+\_\+id)
\begin{DoxyCompactList}\small\item\em Removes task to os\+\_\+task array. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{os_8cpp_a64ca823d60335b83f74cc28378018058}{os\+\_\+start\+\_\+task}} (void($\ast$ptr\+\_\+fn)())
\begin{DoxyCompactList}\small\item\em Starts a task. Runs the task on the scheduler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{os_8cpp_ab1dcb96426cc0b7e05e92e2dd1e05373}{os\+\_\+delay}} (int32\+\_\+t t\+\_\+sleep)
\begin{DoxyCompactList}\small\item\em Non-\/blocking delay. Changes the state of a running task to sleeping. Allows the scheduler to run other tasks when the current task is sleeping. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{os_8cpp_ad89e53bc232b85604368e45d2469784f}\label{os_8cpp_ad89e53bc232b85604368e45d2469784f}} 
void {\bfseries os\+\_\+scheduler\+\_\+sync} (void)
\begin{DoxyCompactList}\small\item\em Puts the scheduler in the IDLE state, till 2 ms has not elasped so that tasks and synced and runs periodically. Decrements sleep time remaining for each task by 2 ms. Changes the state of a SLEEPING task to READY when it sleep time remaining for that task reaches 0. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{os_8cpp_a6fa1bd897970c397a75e419b075aba71}\label{os_8cpp_a6fa1bd897970c397a75e419b075aba71}} 
void {\bfseries os\+\_\+task\+\_\+self\+\_\+quit} (void)
\begin{DoxyCompactList}\small\item\em Changes the state of the calling task to DEAD. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{os_8cpp_ab57f6dabc7b76633745b36ae12e05f93}{os\+\_\+from\+\_\+task\+\_\+start}} (\mbox{\hyperlink{structTCBstruct}{TCBstruct}} $\ast$ptr\+\_\+dead\+\_\+tcb)
\begin{DoxyCompactList}\small\item\em Changes the state of a given task to READY. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{os_8cpp_a9ce59cec215f42e56b789cab0b74b899}{os\+\_\+from\+\_\+task\+\_\+stop}} (\mbox{\hyperlink{structTCBstruct}{TCBstruct}} $\ast$ptr\+\_\+dead\+\_\+tcb)
\begin{DoxyCompactList}\small\item\em Changes the state of a given task to DEAD. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{os_8cpp_a3fc86ed91990cc04813ff7823fb4ffcd}\label{os_8cpp_a3fc86ed91990cc04813ff7823fb4ffcd}} 
void {\bfseries os\+\_\+scheduler} (void)
\begin{DoxyCompactList}\small\item\em Scheduler code. Iterates over all the tasks in os\+\_\+task array and runs the tasks that have RUNNING as their state. Changes state of a READY task to RUNNING. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{os_8cpp_aa21f32a38ebe8b3bf249f4b46372e4fa}\label{os_8cpp_aa21f32a38ebe8b3bf249f4b46372e4fa}} 
\mbox{\hyperlink{structTCBstruct}{TCBstruct}} {\bfseries os\+\_\+task} \mbox{[}10\mbox{]}
\item 
\mbox{\Hypertarget{os_8cpp_adac4731e32f370696ae41deaf61550b9}\label{os_8cpp_adac4731e32f370696ae41deaf61550b9}} 
\mbox{\hyperlink{structTCBstruct}{TCBstruct}} {\bfseries os\+\_\+dead\+\_\+task} \mbox{[}10\mbox{]}
\item 
\mbox{\Hypertarget{os_8cpp_a1a6a83370c81dbf9da1ef7043d0609a7}\label{os_8cpp_a1a6a83370c81dbf9da1ef7043d0609a7}} 
volatile uint8\+\_\+t {\bfseries os\+\_\+s\+Flag} = PENDING
\item 
\mbox{\Hypertarget{os_8cpp_af67aab507a504eb1ede7ce8cd88197ed}\label{os_8cpp_af67aab507a504eb1ede7ce8cd88197ed}} 
volatile uint32\+\_\+t {\bfseries os\+\_\+ticks} = 0
\item 
\mbox{\Hypertarget{os_8cpp_a28a16e3ef2647ffebc385a3b15bdf4a7}\label{os_8cpp_a28a16e3ef2647ffebc385a3b15bdf4a7}} 
uint8\+\_\+t {\bfseries os\+\_\+current\+\_\+task\+\_\+index} = 0
\item 
\mbox{\Hypertarget{os_8cpp_a73a2690f8480d8cf41c9d0158044a5a8}\label{os_8cpp_a73a2690f8480d8cf41c9d0158044a5a8}} 
uint8\+\_\+t {\bfseries os\+\_\+next\+\_\+task\+\_\+index} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
DDS Scheduler driver code. 

\begin{DoxyAuthor}{Author}
Sourav Jena, Yi Chen 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2022-\/05-\/28 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{os_8cpp_a7cfcbe42bd266750aeb6e5d71e5ea479}\label{os_8cpp_a7cfcbe42bd266750aeb6e5d71e5ea479}} 
\index{os.cpp@{os.cpp}!ISR@{ISR}}
\index{ISR@{ISR}!os.cpp@{os.cpp}}
\doxysubsubsection{\texorpdfstring{ISR()}{ISR()}}
{\footnotesize\ttfamily ISR (\begin{DoxyParamCaption}\item[{TIMER2\+\_\+\+OVF\+\_\+vect}]{ }\end{DoxyParamCaption})}



Interrupt Service Routine for Timer-\/2. 


\begin{DoxyEnumerate}
\item Fires every 2 ms.
\item Changes os\+\_\+s\+Flag from PENDING to DONE.
\item Increments os\+\_\+ticks. 
\end{DoxyEnumerate}\mbox{\Hypertarget{os_8cpp_aed347e469bcc7a123a2cf79e6605c330}\label{os_8cpp_aed347e469bcc7a123a2cf79e6605c330}} 
\index{os.cpp@{os.cpp}!os\_add\_task@{os\_add\_task}}
\index{os\_add\_task@{os\_add\_task}!os.cpp@{os.cpp}}
\doxysubsubsection{\texorpdfstring{os\_add\_task()}{os\_add\_task()}}
{\footnotesize\ttfamily void os\+\_\+add\+\_\+task (\begin{DoxyParamCaption}\item[{void($\ast$)()}]{ptr\+\_\+fn,  }\item[{uint8\+\_\+t}]{unique\+\_\+id,  }\item[{String}]{str\+\_\+name }\end{DoxyParamCaption})}



Add a task to os\+\_\+task array. 


\begin{DoxyParams}{Parameters}
{\em ptr\+\_\+fn} & Pointer to the function of the task \\
\hline
{\em unique\+\_\+id} & Unique id that is assigned to the task \\
\hline
{\em str\+\_\+name} & Unique name that is assigned to the task \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{os_8cpp_ab1dcb96426cc0b7e05e92e2dd1e05373}\label{os_8cpp_ab1dcb96426cc0b7e05e92e2dd1e05373}} 
\index{os.cpp@{os.cpp}!os\_delay@{os\_delay}}
\index{os\_delay@{os\_delay}!os.cpp@{os.cpp}}
\doxysubsubsection{\texorpdfstring{os\_delay()}{os\_delay()}}
{\footnotesize\ttfamily void os\+\_\+delay (\begin{DoxyParamCaption}\item[{int32\+\_\+t}]{delay\+\_\+ms }\end{DoxyParamCaption})}



Non-\/blocking delay. Changes the state of a running task to sleeping. Allows the scheduler to run other tasks when the current task is sleeping. 


\begin{DoxyParams}{Parameters}
{\em delay\+\_\+ms} & Time in ms the task needs to sleep \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{os_8cpp_ab57f6dabc7b76633745b36ae12e05f93}\label{os_8cpp_ab57f6dabc7b76633745b36ae12e05f93}} 
\index{os.cpp@{os.cpp}!os\_from\_task\_start@{os\_from\_task\_start}}
\index{os\_from\_task\_start@{os\_from\_task\_start}!os.cpp@{os.cpp}}
\doxysubsubsection{\texorpdfstring{os\_from\_task\_start()}{os\_from\_task\_start()}}
{\footnotesize\ttfamily void os\+\_\+from\+\_\+task\+\_\+start (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTCBstruct}{TCBstruct}} $\ast$}]{ptr\+\_\+tcb }\end{DoxyParamCaption})}



Changes the state of a given task to READY. 


\begin{DoxyParams}{Parameters}
{\em ptr\+\_\+tcb} & TCB of the task whose state we want to change. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{os_8cpp_a9ce59cec215f42e56b789cab0b74b899}\label{os_8cpp_a9ce59cec215f42e56b789cab0b74b899}} 
\index{os.cpp@{os.cpp}!os\_from\_task\_stop@{os\_from\_task\_stop}}
\index{os\_from\_task\_stop@{os\_from\_task\_stop}!os.cpp@{os.cpp}}
\doxysubsubsection{\texorpdfstring{os\_from\_task\_stop()}{os\_from\_task\_stop()}}
{\footnotesize\ttfamily void os\+\_\+from\+\_\+task\+\_\+stop (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTCBstruct}{TCBstruct}} $\ast$}]{ptr\+\_\+dead\+\_\+tcb }\end{DoxyParamCaption})}



Changes the state of a given task to DEAD. 


\begin{DoxyParams}{Parameters}
{\em ptr\+\_\+dead\+\_\+tcb} & TCB of the task whose state we want to change. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{os_8cpp_a4074f4edb4c4e174a6bfa82b66d2942d}\label{os_8cpp_a4074f4edb4c4e174a6bfa82b66d2942d}} 
\index{os.cpp@{os.cpp}!os\_remove\_task@{os\_remove\_task}}
\index{os\_remove\_task@{os\_remove\_task}!os.cpp@{os.cpp}}
\doxysubsubsection{\texorpdfstring{os\_remove\_task()}{os\_remove\_task()}}
{\footnotesize\ttfamily void os\+\_\+remove\+\_\+task (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{target\+\_\+id }\end{DoxyParamCaption})}



Removes task to os\+\_\+task array. 


\begin{DoxyParams}{Parameters}
{\em target\+\_\+id} & Unique id of the task that needs to be removed \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{os_8cpp_a64ca823d60335b83f74cc28378018058}\label{os_8cpp_a64ca823d60335b83f74cc28378018058}} 
\index{os.cpp@{os.cpp}!os\_start\_task@{os\_start\_task}}
\index{os\_start\_task@{os\_start\_task}!os.cpp@{os.cpp}}
\doxysubsubsection{\texorpdfstring{os\_start\_task()}{os\_start\_task()}}
{\footnotesize\ttfamily void os\+\_\+start\+\_\+task (\begin{DoxyParamCaption}\item[{void($\ast$)()}]{ptr\+\_\+fn }\end{DoxyParamCaption})}



Starts a task. Runs the task on the scheduler. 


\begin{DoxyParams}{Parameters}
{\em ptr\+\_\+fn} & Function pointer pointing to the Task. \\
\hline
\end{DoxyParams}
